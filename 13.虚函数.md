#### 1、基类中的虚函数

##### 目的：为了允许用基类的指针来调用当前基类的继承类的函数

例子：A是基类，B是继承类

```c++
class A  
{  
public:  
    virtual void foo()  
    {  
        cout<<"A::foo() is called"<<endl;  
    }  
};  

class B:public A  
{  
public:  
    void foo()  
    {  
        cout<<"B::foo() is called"<<endl;  
    }  
};  

int main(void)  
{  
    A *a = new B();  
    a->foo();   // 在这里，a虽然是指向A的指针，但是被调用的函数(foo)却是B的!  
    return 0;  
}
```

> 执行结果：B::foo() is called
>
> A类声明了虚函数之后，当A新创建了一个动态对象a，a指向的函数是它派生类B中的函数！





#### 2、纯虚函数

##### 概念：在抽象类中声明，在基类中没有定义，但要求任何派生类都要定义自己的实现方法

```c++
//格式
virtual void func() = 0;
```

##### 作用：

> ​	在很多情况下，基类本身生成对象是不合情理的。例如，动物作为一个基类可以派生出老虎、
>
> 孔雀等子类，但动物本身生成对象明显不合常理。
>
> 　　为了解决上述问题，引入了纯虚函数的概念，将函数定义为纯虚函数（方法：virtual 
>
> ReturnType Function()= 0;），则编译器要求在派生类中必须予以重写以实现多态性。同时含有纯
>
> 虚拟函数的类称为抽象类，它不能生成对象。这样就很好地解决了上述两个问题。





#### 3、抽象类

##### 概念：带有纯虚函数的抽象类，不能直接创建一个抽象类的对象，只能通过派生类进行对象创建

##### 目的：提供一个为派生类实现的一组规范、一组格式（语义），子类可以具体实现这些规范好的函数；

抽象类只能作为基类，可以被继承；

抽象类不允许被创建一个实例对象，只能创建它的派生类的实例对象；





## 规定

> 1、声明纯虚函数的类必须是抽象类：abstract class
>
> 2、抽象类不允许被创建一个实例对象，只能创建它的派生类的实例对象；
>
> 3、纯虚函数必须在派生类中重新写函数的实现；
>
> 4、动态分配堆上内存的时候，[析构函数](https://www.zhihu.com/search?q=析构函数&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A69592611})必须是虚函数，但没有必要是纯虚的；
>
> 5、友元不是成员函数，只有成员函数才可以是虚拟的，因此友元函数不能是虚函数；
>
> ​	  但友元函数可以调用虚函数；





## 总结

> 虚函数是C++中用于实现多态的机制。
>
> 核心理念就是通过基类访问派生类定义的函数。